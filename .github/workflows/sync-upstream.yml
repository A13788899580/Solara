name: 同步上游主分支

on:
  schedule:
    - cron: '0 2 * * *' # 每天UTC凌晨2点
  workflow_dispatch:

jobs:
  sync:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}

    - name: Sync with upstream
      run: |
        # 添加上游仓库
        git remote add upstream https://github.com/akudamatata/Solara.git
        
        # 同步主分支
        git fetch upstream
        git checkout main
        git rebase upstream/main
        git push origin main --force-with-lease
